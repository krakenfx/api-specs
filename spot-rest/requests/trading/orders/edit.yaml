- lang: cURL
  source: |
    curl -X "POST" "https://api.kraken.com/0/private/EditOrder" \
         -H 'API-Key: <YOUR-API-KEY>' \
         -H 'API-Sign: <YOUR-MSG-SIGNATURE>' \
         -H 'Content-Type: application/x-www-form-urlencoded; charset=utf-8' \
         --data-urlencode "nonce=<YOUR-NONCE>"
         --data-urlencode "pair=XXBTZUSD" \
         --data-urlencode "txid=OHYO67-6LP66-HMQ437" \
         --data-urlencode "ordertype=limit" \
         --data-urlencode "price=45000.1" \
        --data-urlencode "price2=46000.1" \
         --data-urlencode "volume=2.1234" \
- lang: Python
  source: |
    import time
    import os
    import requests

    # Read Kraken API key and secret stored in environment variables
    api_url = "https://api.kraken.com"
    api_key = os.environ['API_KEY_KRAKEN']
    api_sec = os.environ['API_SEC_KRAKEN']

    # Attaches auth headers and returns results of a POST request
    def kraken_request(uri_path, data, api_key, api_sec):
        headers = {}
        headers['API-Key'] = api_key
        # get_kraken_signature() as defined in the 'Authentication' section
        headers['API-Sign'] = get_kraken_signature(uri_path, data, api_sec)             
        req = requests.post((api_url + uri_path), headers=headers, data=data)
        return req
    
    # Construct the request and print the result
    resp = kraken_request('/0/private/EditOrder', {
        "nonce": str(int(1000*time.time())),
        "txid": "OHYO67-6LP66-HMQ437",
        "volume": 1.25,
        "pair": "XBTUSD",
        "price": 27500,
        "price2": 26500
    }, api_key, api_sec)

    print(resp.json())
# - lang: PHP
#   source: |
#     // buy 2.12345678 XBTUSD @ limit $101.9901
#     // with 2:1 leverage, with a follow up stop loss,
#     // take profit sell order: stop at -5% loss,
#     // take profit at +$10 price increase (signed stop/loss prices determined automatically using # notation):

#     require_once('KrakenAPI.php');

#     const KEY = '<YOUR-API-KEY>';
#     const SECRET = '<YOUR-MSG-SIGNATURE>';

#     $kraken = new KrakenAPI(KEY, SECRET, 'https://api.kraken.com');
#     $res = $kraken->QueryPrivate('EditOrder', [
#         'pair' => 'XXBTZUSD',
#         'type' => 'buy',
#         'ordertype' => 'limit',
#         'price' => '101.9901',
#         'volume' => '2.12345678',
#         'leverage' => '2:1',
#         'close' => [
#             'ordertype' => 'stop-loss-profit',
#             'price' => '#5%',  // stop loss price (relative percentage delta)
#             'price2' => '#10'  // take profit price (relative delta)
#         ]
#       ]);
